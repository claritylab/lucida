<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.6">
  <compounddef id="ms__mgau_8c" kind="file">
    <compoundname>ms_mgau.c</compoundname>
    <includes refid="ms__mgau_8h" local="yes">ms_mgau.h</includes>
    <incdepgraph>
      <node id="1131">
        <label>sphinxbase/ngram_model.h</label>
      </node>
      <node id="1136">
        <label>sphinxbase/hash_table.h</label>
      </node>
      <node id="1137">
        <label>tmat.h</label>
        <link refid="tmat_8h"/>
        <childnode refid="1125" relation="include">
        </childnode>
        <childnode refid="1122" relation="include">
        </childnode>
      </node>
      <node id="1145">
        <label>pocketsphinx.h</label>
        <link refid="pocketsphinx_8h"/>
        <childnode refid="1125" relation="include">
        </childnode>
        <childnode refid="1121" relation="include">
        </childnode>
        <childnode refid="1122" relation="include">
        </childnode>
        <childnode refid="1126" relation="include">
        </childnode>
        <childnode refid="1123" relation="include">
        </childnode>
        <childnode refid="1146" relation="include">
        </childnode>
        <childnode refid="1131" relation="include">
        </childnode>
        <childnode refid="1136" relation="include">
        </childnode>
        <childnode refid="1132" relation="include">
        </childnode>
        <childnode refid="1147" relation="include">
        </childnode>
        <childnode refid="1148" relation="include">
        </childnode>
        <childnode refid="1130" relation="include">
        </childnode>
      </node>
      <node id="1152">
        <label>assert.h</label>
      </node>
      <node id="1151">
        <label>float.h</label>
      </node>
      <node id="1121">
        <label>sphinxbase/cmd_ln.h</label>
      </node>
      <node id="1150">
        <label>s3types.h</label>
        <link refid="s3types_8h"/>
        <childnode refid="1151" relation="include">
        </childnode>
        <childnode refid="1152" relation="include">
        </childnode>
        <childnode refid="1129" relation="include">
        </childnode>
        <childnode refid="1128" relation="include">
        </childnode>
        <childnode refid="1153" relation="include">
        </childnode>
      </node>
      <node id="1126">
        <label>sphinxbase/fe.h</label>
      </node>
      <node id="1139">
        <label>sphinxbase/fixpoint.h</label>
      </node>
      <node id="1135">
        <label>mdef.h</label>
        <link refid="mdef_8h"/>
        <childnode refid="1125" relation="include">
        </childnode>
        <childnode refid="1136" relation="include">
        </childnode>
      </node>
      <node id="1143">
        <label>pocketsphinx_internal.h</label>
        <link refid="pocketsphinx__internal_8h"/>
        <childnode refid="1121" relation="include">
        </childnode>
        <childnode refid="1126" relation="include">
        </childnode>
        <childnode refid="1123" relation="include">
        </childnode>
        <childnode refid="1136" relation="include">
        </childnode>
        <childnode refid="1122" relation="include">
        </childnode>
        <childnode refid="1144" relation="include">
        </childnode>
        <childnode refid="1145" relation="include">
        </childnode>
        <childnode refid="1124" relation="include">
        </childnode>
        <childnode refid="1149" relation="include">
        </childnode>
        <childnode refid="1154" relation="include">
        </childnode>
      </node>
      <node id="1130">
        <label>ps_mllr.h</label>
        <link refid="ps__mllr_8h"/>
        <childnode refid="1129" relation="include">
        </childnode>
        <childnode refid="1131" relation="include">
        </childnode>
        <childnode refid="1132" relation="include">
        </childnode>
      </node>
      <node id="1134">
        <label>sphinxbase/mmio.h</label>
      </node>
      <node id="1153">
        <label>sphinxbase/ckd_alloc.h</label>
      </node>
      <node id="1140">
        <label>sphinxbase/listelem_alloc.h</label>
      </node>
      <node id="1142">
        <label>vector.h</label>
        <link refid="vector_8h_source"/>
        <childnode refid="1125" relation="include">
        </childnode>
        <childnode refid="1129" relation="include">
        </childnode>
      </node>
      <node id="1155">
        <label>ms_senone.h</label>
        <link refid="ms__senone_8h"/>
        <childnode refid="1128" relation="include">
        </childnode>
        <childnode refid="1153" relation="include">
        </childnode>
        <childnode refid="1121" relation="include">
        </childnode>
        <childnode refid="1122" relation="include">
        </childnode>
        <childnode refid="1141" relation="include">
        </childnode>
        <childnode refid="1133" relation="include">
        </childnode>
      </node>
      <node id="1132">
        <label>pocketsphinx_export.h</label>
        <link refid="pocketsphinx__export_8h_source"/>
      </node>
      <node id="1123">
        <label>sphinxbase/feat.h</label>
      </node>
      <node id="1129">
        <label>sphinxbase/prim_type.h</label>
      </node>
      <node id="1127">
        <label>sphinxbase/bitvec.h</label>
      </node>
      <node id="1138">
        <label>hmm.h</label>
        <link refid="hmm_8h"/>
        <childnode refid="1125" relation="include">
        </childnode>
        <childnode refid="1139" relation="include">
        </childnode>
        <childnode refid="1140" relation="include">
        </childnode>
        <childnode refid="1133" relation="include">
        </childnode>
      </node>
      <node id="1141">
        <label>ms_gauden.h</label>
        <link refid="ms__gauden_8h"/>
        <childnode refid="1123" relation="include">
        </childnode>
        <childnode refid="1122" relation="include">
        </childnode>
        <childnode refid="1121" relation="include">
        </childnode>
        <childnode refid="1142" relation="include">
        </childnode>
        <childnode refid="1143" relation="include">
        </childnode>
        <childnode refid="1138" relation="include">
        </childnode>
      </node>
      <node id="1124">
        <label>acmod.h</label>
        <link refid="acmod_8h"/>
        <childnode refid="1125" relation="include">
        </childnode>
        <childnode refid="1121" relation="include">
        </childnode>
        <childnode refid="1122" relation="include">
        </childnode>
        <childnode refid="1126" relation="include">
        </childnode>
        <childnode refid="1123" relation="include">
        </childnode>
        <childnode refid="1127" relation="include">
        </childnode>
        <childnode refid="1128" relation="include">
        </childnode>
        <childnode refid="1129" relation="include">
        </childnode>
        <childnode refid="1130" relation="include">
        </childnode>
        <childnode refid="1133" relation="include">
        </childnode>
        <childnode refid="1137" relation="include">
        </childnode>
        <childnode refid="1138" relation="include">
        </childnode>
      </node>
      <node id="1148">
        <label>ps_lattice.h</label>
        <link refid="ps__lattice_8h"/>
        <childnode refid="1129" relation="include">
        </childnode>
        <childnode refid="1131" relation="include">
        </childnode>
        <childnode refid="1132" relation="include">
        </childnode>
      </node>
      <node id="1133">
        <label>bin_mdef.h</label>
        <link refid="bin__mdef_8h"/>
        <childnode refid="1134" relation="include">
        </childnode>
        <childnode refid="1121" relation="include">
        </childnode>
        <childnode refid="1132" relation="include">
        </childnode>
        <childnode refid="1135" relation="include">
        </childnode>
      </node>
      <node id="1147">
        <label>cmdln_macro.h</label>
        <link refid="cmdln__macro_8h_source"/>
        <childnode refid="1121" relation="include">
        </childnode>
        <childnode refid="1123" relation="include">
        </childnode>
        <childnode refid="1126" relation="include">
        </childnode>
      </node>
      <node id="1128">
        <label>sphinxbase/err.h</label>
      </node>
      <node id="1149">
        <label>dict.h</label>
        <link refid="dict_8h"/>
        <childnode refid="1136" relation="include">
        </childnode>
        <childnode refid="1150" relation="include">
        </childnode>
        <childnode refid="1133" relation="include">
        </childnode>
        <childnode refid="1132" relation="include">
        </childnode>
      </node>
      <node id="1154">
        <label>dict2pid.h</label>
        <link refid="dict2pid_8h"/>
        <childnode refid="1125" relation="include">
        </childnode>
        <childnode refid="1122" relation="include">
        </childnode>
        <childnode refid="1127" relation="include">
        </childnode>
        <childnode refid="1150" relation="include">
        </childnode>
        <childnode refid="1133" relation="include">
        </childnode>
        <childnode refid="1149" relation="include">
        </childnode>
      </node>
      <node id="1146">
        <label>sphinxbase/fsg_model.h</label>
      </node>
      <node id="1122">
        <label>sphinxbase/logmath.h</label>
      </node>
      <node id="1144">
        <label>sphinxbase/profile.h</label>
      </node>
      <node id="1125">
        <label>stdio.h</label>
      </node>
      <node id="1119">
        <label>src/libpocketsphinx/ms_mgau.c</label>
        <link refid="ms_mgau.c"/>
        <childnode refid="1120" relation="include">
        </childnode>
      </node>
      <node id="1120">
        <label>ms_mgau.h</label>
        <link refid="ms__mgau_8h"/>
        <childnode refid="1121" relation="include">
        </childnode>
        <childnode refid="1122" relation="include">
        </childnode>
        <childnode refid="1123" relation="include">
        </childnode>
        <childnode refid="1124" relation="include">
        </childnode>
        <childnode refid="1133" relation="include">
        </childnode>
        <childnode refid="1141" relation="include">
        </childnode>
        <childnode refid="1155" relation="include">
        </childnode>
      </node>
    </incdepgraph>
      <sectiondef kind="var">
      <memberdef kind="variable" id="ms__mgau_8c_1af9b091af093312c79d1985c5a4541bbd" prot="public" static="yes" mutable="no">
        <type><ref refid="structps__mgaufuncs__s" kindref="compound">ps_mgaufuncs_t</ref></type>
        <definition>ps_mgaufuncs_t ms_mgau_funcs</definition>
        <argsstring></argsstring>
        <name>ms_mgau_funcs</name>
        <initializer>= {
    &quot;ms&quot;,
    ms_cont_mgau_frame_eval, 
    ms_mgau_mllr_transform,  
    ms_mgau_free             
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/gpuser/cmusphinx-code/pocketsphinx/src/libpocketsphinx/ms_mgau.c" line="74" column="1" bodyfile="/home/gpuser/cmusphinx-code/pocketsphinx/src/libpocketsphinx/ms_mgau.c" bodystart="74" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="ms__mgau_8c_1a7dbdcb8e1901665b955e324eefdfeea3" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="acmod_8h_1ab7a75abad7044b2ab494823d2ae8bbd4" kindref="member">ps_mgau_t</ref> *</type>
        <definition>ps_mgau_t* ms_mgau_init</definition>
        <argsstring>(acmod_t *acmod, logmath_t *lmath, bin_mdef_t *mdef)</argsstring>
        <name>ms_mgau_init</name>
        <param>
          <type><ref refid="structacmod__s" kindref="compound">acmod_t</ref> *</type>
          <declname>acmod</declname>
        </param>
        <param>
          <type>logmath_t *</type>
          <declname>lmath</declname>
        </param>
        <param>
          <type><ref refid="bin__mdef_8h_1a269082d84ae254593b79f1eafe9b2d12" kindref="member">bin_mdef_t</ref> *</type>
          <declname>mdef</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/gpuser/cmusphinx-code/pocketsphinx/src/libpocketsphinx/ms_mgau.c" line="82" column="1" bodyfile="/home/gpuser/cmusphinx-code/pocketsphinx/src/libpocketsphinx/ms_mgau.c" bodystart="82" bodyend="160"/>
      </memberdef>
      <memberdef kind="function" id="ms__mgau_8c_1a54bc142ac6d417362d23539781565c24" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void ms_mgau_free</definition>
        <argsstring>(ps_mgau_t *mg)</argsstring>
        <name>ms_mgau_free</name>
        <param>
          <type><ref refid="acmod_8h_1ab7a75abad7044b2ab494823d2ae8bbd4" kindref="member">ps_mgau_t</ref> *</type>
          <declname>mg</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/gpuser/cmusphinx-code/pocketsphinx/src/libpocketsphinx/ms_mgau.c" line="163" column="1" bodyfile="/home/gpuser/cmusphinx-code/pocketsphinx/src/libpocketsphinx/ms_mgau.c" bodystart="163" bodyend="179"/>
      </memberdef>
      <memberdef kind="function" id="ms__mgau_8c_1a670f091734334ca29b9134d424c9da54" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ms_mgau_mllr_transform</definition>
        <argsstring>(ps_mgau_t *s, ps_mllr_t *mllr)</argsstring>
        <name>ms_mgau_mllr_transform</name>
        <param>
          <type><ref refid="acmod_8h_1ab7a75abad7044b2ab494823d2ae8bbd4" kindref="member">ps_mgau_t</ref> *</type>
          <declname>s</declname>
        </param>
        <param>
          <type><ref refid="ps__mllr_8h_1ad4b6bf4c3cb6a671f79f1d709857d5b1" kindref="member">ps_mllr_t</ref> *</type>
          <declname>mllr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/gpuser/cmusphinx-code/pocketsphinx/src/libpocketsphinx/ms_mgau.c" line="182" column="1" bodyfile="/home/gpuser/cmusphinx-code/pocketsphinx/src/libpocketsphinx/ms_mgau.c" bodystart="182" bodyend="187"/>
      </memberdef>
      <memberdef kind="function" id="ms__mgau_8c_1a596fe4fbe3f6ebf652f19017a7ce4e61" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int32</type>
        <definition>int32 ms_cont_mgau_frame_eval</definition>
        <argsstring>(ps_mgau_t *mg, int16 *senscr, uint8 *senone_active, int32 n_senone_active, mfcc_t **feat, int32 frame, int32 compallsen)</argsstring>
        <name>ms_cont_mgau_frame_eval</name>
        <param>
          <type><ref refid="acmod_8h_1ab7a75abad7044b2ab494823d2ae8bbd4" kindref="member">ps_mgau_t</ref> *</type>
          <declname>mg</declname>
        </param>
        <param>
          <type>int16 *</type>
          <declname>senscr</declname>
        </param>
        <param>
          <type>uint8 *</type>
          <declname>senone_active</declname>
        </param>
        <param>
          <type>int32</type>
          <declname>n_senone_active</declname>
        </param>
        <param>
          <type>mfcc_t **</type>
          <declname>feat</declname>
        </param>
        <param>
          <type>int32</type>
          <declname>frame</declname>
        </param>
        <param>
          <type>int32</type>
          <declname>compallsen</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/gpuser/cmusphinx-code/pocketsphinx/src/libpocketsphinx/ms_mgau.c" line="190" column="1" bodyfile="/home/gpuser/cmusphinx-code/pocketsphinx/src/libpocketsphinx/ms_mgau.c" bodystart="190" bodyend="279"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*<sp/>-*-<sp/>c-basic-offset:<sp/>4;<sp/>indent-tabs-mode:<sp/>nil<sp/>-*-<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>====================================================================</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(c)<sp/>1999-2004<sp/>Carnegie<sp/>Mellon<sp/>University.<sp/><sp/>All<sp/>rights</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*<sp/>reserved.</highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*<sp/>Redistribution<sp/>and<sp/>use<sp/>in<sp/>source<sp/>and<sp/>binary<sp/>forms,<sp/>with<sp/>or<sp/>without</highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/>*<sp/>modification,<sp/>are<sp/>permitted<sp/>provided<sp/>that<sp/>the<sp/>following<sp/>conditions</highlight></codeline>
<codeline lineno="8"><highlight class="comment"><sp/>*<sp/>are<sp/>met:</highlight></codeline>
<codeline lineno="9"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="10"><highlight class="comment"><sp/>*<sp/>1.<sp/>Redistributions<sp/>of<sp/>source<sp/>code<sp/>must<sp/>retain<sp/>the<sp/>above<sp/>copyright</highlight></codeline>
<codeline lineno="11"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/>notice,<sp/>this<sp/>list<sp/>of<sp/>conditions<sp/>and<sp/>the<sp/>following<sp/>disclaimer.<sp/></highlight></codeline>
<codeline lineno="12"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="13"><highlight class="comment"><sp/>*<sp/>2.<sp/>Redistributions<sp/>in<sp/>binary<sp/>form<sp/>must<sp/>reproduce<sp/>the<sp/>above<sp/>copyright</highlight></codeline>
<codeline lineno="14"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/>notice,<sp/>this<sp/>list<sp/>of<sp/>conditions<sp/>and<sp/>the<sp/>following<sp/>disclaimer<sp/>in</highlight></codeline>
<codeline lineno="15"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/>the<sp/>documentation<sp/>and/or<sp/>other<sp/>materials<sp/>provided<sp/>with<sp/>the</highlight></codeline>
<codeline lineno="16"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/>distribution.</highlight></codeline>
<codeline lineno="17"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="18"><highlight class="comment"><sp/>*<sp/>This<sp/>work<sp/>was<sp/>supported<sp/>in<sp/>part<sp/>by<sp/>funding<sp/>from<sp/>the<sp/>Defense<sp/>Advanced<sp/></highlight></codeline>
<codeline lineno="19"><highlight class="comment"><sp/>*<sp/>Research<sp/>Projects<sp/>Agency<sp/>and<sp/>the<sp/>National<sp/>Science<sp/>Foundation<sp/>of<sp/>the<sp/></highlight></codeline>
<codeline lineno="20"><highlight class="comment"><sp/>*<sp/>United<sp/>States<sp/>of<sp/>America,<sp/>and<sp/>the<sp/>CMU<sp/>Sphinx<sp/>Speech<sp/>Consortium.</highlight></codeline>
<codeline lineno="21"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="22"><highlight class="comment"><sp/>*<sp/>THIS<sp/>SOFTWARE<sp/>IS<sp/>PROVIDED<sp/>BY<sp/>CARNEGIE<sp/>MELLON<sp/>UNIVERSITY<sp/>``AS<sp/>IS&apos;&apos;<sp/>AND<sp/></highlight></codeline>
<codeline lineno="23"><highlight class="comment"><sp/>*<sp/>ANY<sp/>EXPRESSED<sp/>OR<sp/>IMPLIED<sp/>WARRANTIES,<sp/>INCLUDING,<sp/>BUT<sp/>NOT<sp/>LIMITED<sp/>TO,<sp/></highlight></codeline>
<codeline lineno="24"><highlight class="comment"><sp/>*<sp/>THE<sp/>IMPLIED<sp/>WARRANTIES<sp/>OF<sp/>MERCHANTABILITY<sp/>AND<sp/>FITNESS<sp/>FOR<sp/>A<sp/>PARTICULAR</highlight></codeline>
<codeline lineno="25"><highlight class="comment"><sp/>*<sp/>PURPOSE<sp/>ARE<sp/>DISCLAIMED.<sp/><sp/>IN<sp/>NO<sp/>EVENT<sp/>SHALL<sp/>CARNEGIE<sp/>MELLON<sp/>UNIVERSITY</highlight></codeline>
<codeline lineno="26"><highlight class="comment"><sp/>*<sp/>NOR<sp/>ITS<sp/>EMPLOYEES<sp/>BE<sp/>LIABLE<sp/>FOR<sp/>ANY<sp/>DIRECT,<sp/>INDIRECT,<sp/>INCIDENTAL,</highlight></codeline>
<codeline lineno="27"><highlight class="comment"><sp/>*<sp/>SPECIAL,<sp/>EXEMPLARY,<sp/>OR<sp/>CONSEQUENTIAL<sp/>DAMAGES<sp/>(INCLUDING,<sp/>BUT<sp/>NOT<sp/></highlight></codeline>
<codeline lineno="28"><highlight class="comment"><sp/>*<sp/>LIMITED<sp/>TO,<sp/>PROCUREMENT<sp/>OF<sp/>SUBSTITUTE<sp/>GOODS<sp/>OR<sp/>SERVICES;<sp/>LOSS<sp/>OF<sp/>USE,<sp/></highlight></codeline>
<codeline lineno="29"><highlight class="comment"><sp/>*<sp/>DATA,<sp/>OR<sp/>PROFITS;<sp/>OR<sp/>BUSINESS<sp/>INTERRUPTION)<sp/>HOWEVER<sp/>CAUSED<sp/>AND<sp/>ON<sp/>ANY<sp/></highlight></codeline>
<codeline lineno="30"><highlight class="comment"><sp/>*<sp/>THEORY<sp/>OF<sp/>LIABILITY,<sp/>WHETHER<sp/>IN<sp/>CONTRACT,<sp/>STRICT<sp/>LIABILITY,<sp/>OR<sp/>TORT<sp/></highlight></codeline>
<codeline lineno="31"><highlight class="comment"><sp/>*<sp/>(INCLUDING<sp/>NEGLIGENCE<sp/>OR<sp/>OTHERWISE)<sp/>ARISING<sp/>IN<sp/>ANY<sp/>WAY<sp/>OUT<sp/>OF<sp/>THE<sp/>USE<sp/></highlight></codeline>
<codeline lineno="32"><highlight class="comment"><sp/>*<sp/>OF<sp/>THIS<sp/>SOFTWARE,<sp/>EVEN<sp/>IF<sp/>ADVISED<sp/>OF<sp/>THE<sp/>POSSIBILITY<sp/>OF<sp/>SUCH<sp/>DAMAGE.</highlight></codeline>
<codeline lineno="33"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="34"><highlight class="comment"><sp/>*<sp/>====================================================================</highlight></codeline>
<codeline lineno="35"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="36"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="38"><highlight class="comment"><sp/>*<sp/>ms_mgau.c<sp/>--<sp/>Essentially<sp/>a<sp/>wrapper<sp/>that<sp/>wrap<sp/>up<sp/>gauden<sp/>and</highlight></codeline>
<codeline lineno="39"><highlight class="comment"><sp/>*<sp/>senone.<sp/>It<sp/>supports<sp/>multi-stream.<sp/></highlight></codeline>
<codeline lineno="40"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="41"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="42"><highlight class="comment"><sp/>*<sp/>**********************************************</highlight></codeline>
<codeline lineno="43"><highlight class="comment"><sp/>*<sp/>CMU<sp/>ARPA<sp/>Speech<sp/>Project</highlight></codeline>
<codeline lineno="44"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="45"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(c)<sp/>1997<sp/>Carnegie<sp/>Mellon<sp/>University.</highlight></codeline>
<codeline lineno="46"><highlight class="comment"><sp/>*<sp/>ALL<sp/>RIGHTS<sp/>RESERVED.</highlight></codeline>
<codeline lineno="47"><highlight class="comment"><sp/>*<sp/>**********************************************</highlight></codeline>
<codeline lineno="48"><highlight class="comment"><sp/>*<sp/>HISTORY</highlight></codeline>
<codeline lineno="49"><highlight class="comment"><sp/>*<sp/>$Log$</highlight></codeline>
<codeline lineno="50"><highlight class="comment"><sp/>*<sp/>Revision<sp/>1.2<sp/><sp/>2006/02/22<sp/><sp/>16:56:01<sp/><sp/>arthchan2003</highlight></codeline>
<codeline lineno="51"><highlight class="comment"><sp/>*<sp/>Merged<sp/>from<sp/>SPHINX3_5_2_RCI_IRII_BRANCH:<sp/>Added<sp/>ms_mgau.[ch]<sp/>into<sp/>the<sp/>trunk.<sp/>It<sp/>is<sp/>a<sp/>wrapper<sp/>of<sp/>ms_gauden<sp/>and<sp/>ms_senone</highlight></codeline>
<codeline lineno="52"><highlight class="comment"><sp/>*<sp/></highlight></codeline>
<codeline lineno="53"><highlight class="comment"><sp/>*<sp/>Revision<sp/>1.1.2.4<sp/><sp/>2005/09/25<sp/>18:55:19<sp/><sp/>arthchan2003</highlight></codeline>
<codeline lineno="54"><highlight class="comment"><sp/>*<sp/>Added<sp/>a<sp/>flag<sp/>to<sp/>turn<sp/>on<sp/>and<sp/>off<sp/>precomputation.</highlight></codeline>
<codeline lineno="55"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="56"><highlight class="comment"><sp/>*<sp/>Revision<sp/>1.1.2.3<sp/><sp/>2005/08/03<sp/>18:53:44<sp/><sp/>dhdfu</highlight></codeline>
<codeline lineno="57"><highlight class="comment"><sp/>*<sp/>Add<sp/>memory<sp/>deallocation<sp/>functions.<sp/><sp/>Also<sp/>move<sp/>all<sp/>the<sp/>initialization</highlight></codeline>
<codeline lineno="58"><highlight class="comment"><sp/>*<sp/>of<sp/>ms_mgau_model_t<sp/>into<sp/>ms_mgau_init<sp/>(duh!),<sp/>which<sp/>entails<sp/>removing<sp/>it</highlight></codeline>
<codeline lineno="59"><highlight class="comment"><sp/>*<sp/>from<sp/>decode_anytopo<sp/>and<sp/>friends.</highlight></codeline>
<codeline lineno="60"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="61"><highlight class="comment"><sp/>*<sp/>Revision<sp/>1.1.2.2<sp/><sp/>2005/08/02<sp/>21:05:38<sp/><sp/>arthchan2003</highlight></codeline>
<codeline lineno="62"><highlight class="comment"><sp/>*<sp/>1,<sp/>Added<sp/>dist<sp/>and<sp/>mgau_active<sp/>as<sp/>intermediate<sp/>variable<sp/>for<sp/>computation.<sp/>2,<sp/>Added<sp/>ms_cont_mgau_frame_eval,<sp/>which<sp/>is<sp/>a<sp/>multi<sp/>stream<sp/>version<sp/>of<sp/>GMM<sp/>computation<sp/>mainly<sp/>s3.0<sp/>family<sp/>of<sp/>tools.<sp/>3,<sp/>Fixed<sp/>dox-doc.</highlight></codeline>
<codeline lineno="63"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="64"><highlight class="comment"><sp/>*<sp/>Revision<sp/>1.1.2.1<sp/><sp/>2005/07/20<sp/>19:37:09<sp/><sp/>arthchan2003</highlight></codeline>
<codeline lineno="65"><highlight class="comment"><sp/>*<sp/>Added<sp/>a<sp/>multi-stream<sp/>cont_mgau<sp/>(ms_mgau)<sp/>which<sp/>is<sp/>a<sp/>wrapper<sp/>of<sp/>both<sp/>gauden<sp/>and<sp/>senone.<sp/><sp/>Add<sp/>ms_mgau_init<sp/>and<sp/>model_set_mllr.<sp/><sp/>This<sp/>allow<sp/>eliminating<sp/>600<sp/>lines<sp/>of<sp/>code<sp/>in<sp/>decode_anytopo/align/allphone.</highlight></codeline>
<codeline lineno="66"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="67"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="68"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="69"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Local<sp/>headers.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="ms__mgau_8h" kindref="compound">ms_mgau.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="structps__mgaufuncs__s" kindref="compound">ps_mgaufuncs_t</ref><sp/>ms_mgau_funcs<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;ms&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/>ms_cont_mgau_frame_eval,<sp/></highlight><highlight class="comment">/*<sp/>frame_eval<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/>ms_mgau_mllr_transform,<sp/><sp/></highlight><highlight class="comment">/*<sp/>transform<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/>ms_mgau_free<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>free<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal">};</highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"><ref refid="structps__mgau__s" kindref="compound">ps_mgau_t</ref><sp/>*</highlight></codeline>
<codeline lineno="82"><highlight class="normal">ms_mgau_init(<ref refid="structacmod__s" kindref="compound">acmod_t</ref><sp/>*acmod,<sp/>logmath_t<sp/>*lmath,<sp/><ref refid="structbin__mdef__s" kindref="compound">bin_mdef_t</ref><sp/>*mdef)</highlight></codeline>
<codeline lineno="83"><highlight class="normal">{</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Codebooks<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structms__mgau__model__t" kindref="compound">ms_mgau_model_t</ref><sp/>*msg;</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structps__mgau__s" kindref="compound">ps_mgau_t</ref><sp/>*mg;</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structgauden__t" kindref="compound">gauden_t</ref><sp/>*g;</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structsenone__t" kindref="compound">senone_t</ref><sp/>*s;</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/>cmd_ln_t<sp/>*config;</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i;</highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/>config<sp/>=<sp/>acmod-&gt;<ref refid="structacmod__s_1a3563f4d0bdc48d3ee140b9e28806279d" kindref="member">config</ref>;</highlight></codeline>
<codeline lineno="93"><highlight class="normal"></highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>(<ref refid="structms__mgau__model__t" kindref="compound">ms_mgau_model_t</ref><sp/>*)<sp/>ckd_calloc(1,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="structms__mgau__model__t" kindref="compound">ms_mgau_model_t</ref>));</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/>msg-&gt;config<sp/>=<sp/>config;</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/>msg-&gt;<ref refid="structms__mgau__model__t_1a91027cdb757280ac557668068e6f1b07" kindref="member">g</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/>msg-&gt;<ref refid="structms__mgau__model__t_1a551527ce9cd5702d854a1a5600122985" kindref="member">s</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/>g<sp/>=<sp/>msg-&gt;<ref refid="structms__mgau__model__t_1a91027cdb757280ac557668068e6f1b07" kindref="member">g</ref><sp/>=<sp/><ref refid="ms__gauden_8h_1ae4587b0aeb39fd926622a422969ecebc" kindref="member">gauden_init</ref>(cmd_ln_str_r(config,<sp/></highlight><highlight class="stringliteral">&quot;-mean&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_str_r(config,<sp/></highlight><highlight class="stringliteral">&quot;-var&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_float32_r(config,<sp/></highlight><highlight class="stringliteral">&quot;-varfloor&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lmath);</highlight></codeline>
<codeline lineno="103"><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Verify<sp/>n_feat<sp/>and<sp/>veclen,<sp/>against<sp/>acmod.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(g-&gt;<ref refid="structgauden__t_1a6dea221962b4a278dbae4806925a7be0" kindref="member">n_feat</ref><sp/>!=<sp/>feat_dimension1(acmod-&gt;<ref refid="structacmod__s_1a37ec6c2b1f3ada764842e08481239b34" kindref="member">fcb</ref>))<sp/>{</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_ERROR(</highlight><highlight class="stringliteral">&quot;Number<sp/>of<sp/>streams<sp/>does<sp/>not<sp/>match:<sp/>%d<sp/>!=<sp/>%d\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>g-&gt;<ref refid="structgauden__t_1a6dea221962b4a278dbae4806925a7be0" kindref="member">n_feat</ref>,<sp/>feat_dimension1(acmod-&gt;<ref refid="structacmod__s_1a37ec6c2b1f3ada764842e08481239b34" kindref="member">fcb</ref>));</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>error_out;</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>g-&gt;<ref refid="structgauden__t_1a6dea221962b4a278dbae4806925a7be0" kindref="member">n_feat</ref>;<sp/>++i)<sp/>{</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(g-&gt;<ref refid="structgauden__t_1aca099d830de926e628ac0b523046b32c" kindref="member">featlen</ref>[i]<sp/>!=<sp/>feat_dimension2(acmod-&gt;<ref refid="structacmod__s_1a37ec6c2b1f3ada764842e08481239b34" kindref="member">fcb</ref>,<sp/>i))<sp/>{</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_ERROR(</highlight><highlight class="stringliteral">&quot;Dimension<sp/>of<sp/>stream<sp/>%d<sp/>does<sp/>not<sp/>match:<sp/>%d<sp/>!=<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>i,</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>g-&gt;<ref refid="structgauden__t_1aca099d830de926e628ac0b523046b32c" kindref="member">featlen</ref>[i],<sp/>feat_dimension2(acmod-&gt;<ref refid="structacmod__s_1a37ec6c2b1f3ada764842e08481239b34" kindref="member">fcb</ref>,<sp/>i));</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">goto</highlight><highlight class="normal"><sp/>error_out;</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="117"><highlight class="normal"></highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/>s<sp/>=<sp/>msg-&gt;<ref refid="structms__mgau__model__t_1a551527ce9cd5702d854a1a5600122985" kindref="member">s</ref><sp/>=<sp/><ref refid="ms__senone_8h_1a757e0e72a8e5db3c69611f83143b8887" kindref="member">senone_init</ref>(msg-&gt;<ref refid="structms__mgau__model__t_1a91027cdb757280ac557668068e6f1b07" kindref="member">g</ref>,</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_str_r(config,<sp/></highlight><highlight class="stringliteral">&quot;-mixw&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_str_r(config,<sp/></highlight><highlight class="stringliteral">&quot;-senmgau&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_float32_r(config,<sp/></highlight><highlight class="stringliteral">&quot;-mixwfloor&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lmath,<sp/>mdef);</highlight></codeline>
<codeline lineno="123"><highlight class="normal"></highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/>s-&gt;<ref refid="structsenone__t_1ad9b17f6aecf056fcea0eaaab0c7d35ca" kindref="member">aw</ref><sp/>=<sp/>cmd_ln_int32_r(config,<sp/></highlight><highlight class="stringliteral">&quot;-aw&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="125"><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Verify<sp/>senone<sp/>parameters<sp/>against<sp/>gauden<sp/>parameters<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(s-&gt;<ref refid="structsenone__t_1a6a0aa50b8ff66e06f7305d1c8e4a17be" kindref="member">n_feat</ref><sp/>!=<sp/>g-&gt;<ref refid="structgauden__t_1a6dea221962b4a278dbae4806925a7be0" kindref="member">n_feat</ref>)</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_FATAL(</highlight><highlight class="stringliteral">&quot;#Feature<sp/>mismatch:<sp/>gauden=<sp/>%d,<sp/>senone=<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>g-&gt;<ref refid="structgauden__t_1a6dea221962b4a278dbae4806925a7be0" kindref="member">n_feat</ref>,</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s-&gt;<ref refid="structsenone__t_1a6a0aa50b8ff66e06f7305d1c8e4a17be" kindref="member">n_feat</ref>);</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(s-&gt;<ref refid="structsenone__t_1a3c382a37dc9cb650d910bb881c52b336" kindref="member">n_cw</ref><sp/>!=<sp/>g-&gt;<ref refid="structgauden__t_1ab5104d8fa59bc94b12b36104dd4c19ac" kindref="member">n_density</ref>)</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_FATAL(</highlight><highlight class="stringliteral">&quot;#Densities<sp/>mismatch:<sp/>gauden=<sp/>%d,<sp/>senone=<sp/>%d\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>g-&gt;<ref refid="structgauden__t_1ab5104d8fa59bc94b12b36104dd4c19ac" kindref="member">n_density</ref>,<sp/>s-&gt;<ref refid="structsenone__t_1a3c382a37dc9cb650d910bb881c52b336" kindref="member">n_cw</ref>);</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(s-&gt;<ref refid="structsenone__t_1a71cf7b41b2334216944380296c03c99a" kindref="member">n_gauden</ref><sp/>&gt;<sp/>g-&gt;<ref refid="structgauden__t_1af15df11bd2f3ab0290e0a33ca15c836c" kindref="member">n_mgau</ref>)</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_FATAL(</highlight><highlight class="stringliteral">&quot;Senones<sp/>need<sp/>more<sp/>codebooks<sp/>(%d)<sp/>than<sp/>present<sp/>(%d)\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s-&gt;<ref refid="structsenone__t_1a71cf7b41b2334216944380296c03c99a" kindref="member">n_gauden</ref>,<sp/>g-&gt;<ref refid="structgauden__t_1af15df11bd2f3ab0290e0a33ca15c836c" kindref="member">n_mgau</ref>);</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(s-&gt;<ref refid="structsenone__t_1a71cf7b41b2334216944380296c03c99a" kindref="member">n_gauden</ref><sp/>&lt;<sp/>g-&gt;<ref refid="structgauden__t_1af15df11bd2f3ab0290e0a33ca15c836c" kindref="member">n_mgau</ref>)</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_ERROR(</highlight><highlight class="stringliteral">&quot;Senones<sp/>use<sp/>fewer<sp/>codebooks<sp/>(%d)<sp/>than<sp/>present<sp/>(%d)\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s-&gt;<ref refid="structsenone__t_1a71cf7b41b2334216944380296c03c99a" kindref="member">n_gauden</ref>,<sp/>g-&gt;<ref refid="structgauden__t_1af15df11bd2f3ab0290e0a33ca15c836c" kindref="member">n_mgau</ref>);</highlight></codeline>
<codeline lineno="139"><highlight class="normal"></highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/>msg-&gt;<ref refid="structms__mgau__model__t_1a0a67ef79bd74c55734b0944f0d61b668" kindref="member">topn</ref><sp/>=<sp/>cmd_ln_int32_r(config,<sp/></highlight><highlight class="stringliteral">&quot;-topn&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/>E_INFO(</highlight><highlight class="stringliteral">&quot;The<sp/>value<sp/>of<sp/>topn:<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>msg-&gt;<ref refid="structms__mgau__model__t_1a0a67ef79bd74c55734b0944f0d61b668" kindref="member">topn</ref>);</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(msg-&gt;<ref refid="structms__mgau__model__t_1a0a67ef79bd74c55734b0944f0d61b668" kindref="member">topn</ref><sp/>==<sp/>0<sp/>||<sp/>msg-&gt;<ref refid="structms__mgau__model__t_1a0a67ef79bd74c55734b0944f0d61b668" kindref="member">topn</ref><sp/>&gt;<sp/>msg-&gt;<ref refid="structms__mgau__model__t_1a91027cdb757280ac557668068e6f1b07" kindref="member">g</ref>-&gt;<ref refid="structgauden__t_1ab5104d8fa59bc94b12b36104dd4c19ac" kindref="member">n_density</ref>)<sp/>{</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_WARN</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&quot;-topn<sp/>argument<sp/>(%d)<sp/>invalid<sp/>or<sp/>&gt;<sp/>#density<sp/>codewords<sp/>(%d);<sp/>set<sp/>to<sp/>latter\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg-&gt;<ref refid="structms__mgau__model__t_1a0a67ef79bd74c55734b0944f0d61b668" kindref="member">topn</ref>,<sp/>msg-&gt;<ref refid="structms__mgau__model__t_1a91027cdb757280ac557668068e6f1b07" kindref="member">g</ref>-&gt;<ref refid="structgauden__t_1ab5104d8fa59bc94b12b36104dd4c19ac" kindref="member">n_density</ref>);</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg-&gt;<ref refid="structms__mgau__model__t_1a0a67ef79bd74c55734b0944f0d61b668" kindref="member">topn</ref><sp/>=<sp/>msg-&gt;<ref refid="structms__mgau__model__t_1a91027cdb757280ac557668068e6f1b07" kindref="member">g</ref>-&gt;<ref refid="structgauden__t_1ab5104d8fa59bc94b12b36104dd4c19ac" kindref="member">n_density</ref>;</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="148"><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/>msg-&gt;dist<sp/>=<sp/>(<ref refid="structgauden__dist__t" kindref="compound">gauden_dist_t</ref><sp/>***)</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ckd_calloc_3d(g-&gt;<ref refid="structgauden__t_1af15df11bd2f3ab0290e0a33ca15c836c" kindref="member">n_mgau</ref>,<sp/>g-&gt;<ref refid="structgauden__t_1a6dea221962b4a278dbae4806925a7be0" kindref="member">n_feat</ref>,<sp/>msg-&gt;<ref refid="structms__mgau__model__t_1a0a67ef79bd74c55734b0944f0d61b668" kindref="member">topn</ref>,</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="structgauden__dist__t" kindref="compound">gauden_dist_t</ref>));</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/>msg-&gt;mgau_active<sp/>=<sp/>ckd_calloc(g-&gt;<ref refid="structgauden__t_1af15df11bd2f3ab0290e0a33ca15c836c" kindref="member">n_mgau</ref>,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(int8));</highlight></codeline>
<codeline lineno="153"><highlight class="normal"></highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/>mg<sp/>=<sp/>(<ref refid="structps__mgau__s" kindref="compound">ps_mgau_t</ref><sp/>*)msg;</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/>mg-&gt;<ref refid="structps__mgau__s_1a931f7cbf334b8ed50b0e1c2803a10c67" kindref="member">vt</ref><sp/>=<sp/>&amp;ms_mgau_funcs;</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>mg;</highlight></codeline>
<codeline lineno="157"><highlight class="normal">error_out:</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/>ms_mgau_free(ps_mgau_base(msg));</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;<sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="160"><highlight class="normal">}</highlight></codeline>
<codeline lineno="161"><highlight class="normal"></highlight></codeline>
<codeline lineno="162"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="163"><highlight class="normal">ms_mgau_free(<ref refid="structps__mgau__s" kindref="compound">ps_mgau_t</ref><sp/>*<sp/>mg)</highlight></codeline>
<codeline lineno="164"><highlight class="normal">{</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structms__mgau__model__t" kindref="compound">ms_mgau_model_t</ref><sp/>*msg<sp/>=<sp/>(<ref refid="structms__mgau__model__t" kindref="compound">ms_mgau_model_t</ref><sp/>*)mg;</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(msg<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="168"><highlight class="normal"></highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(msg-&gt;<ref refid="structms__mgau__model__t_1a91027cdb757280ac557668068e6f1b07" kindref="member">g</ref>)</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="ms__gauden_8h_1a0306e088fa33894ca40182d2392ffe4d" kindref="member">gauden_free</ref>(msg-&gt;<ref refid="structms__mgau__model__t_1a91027cdb757280ac557668068e6f1b07" kindref="member">g</ref>);</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(msg-&gt;<ref refid="structms__mgau__model__t_1a551527ce9cd5702d854a1a5600122985" kindref="member">s</ref>)</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="ms__senone_8h_1a86881df5bbbd615e2cd8171e3b086fa6" kindref="member">senone_free</ref>(msg-&gt;<ref refid="structms__mgau__model__t_1a551527ce9cd5702d854a1a5600122985" kindref="member">s</ref>);</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(msg-&gt;dist)</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ckd_free_3d((</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)<sp/>msg-&gt;dist);</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(msg-&gt;mgau_active)</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ckd_free(msg-&gt;mgau_active);</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/>ckd_free(msg);</highlight></codeline>
<codeline lineno="179"><highlight class="normal">}</highlight></codeline>
<codeline lineno="180"><highlight class="normal"></highlight></codeline>
<codeline lineno="181"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="182"><highlight class="normal">ms_mgau_mllr_transform(<ref refid="structps__mgau__s" kindref="compound">ps_mgau_t</ref><sp/>*s,</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structps__mllr__s" kindref="compound">ps_mllr_t</ref><sp/>*mllr)</highlight></codeline>
<codeline lineno="184"><highlight class="normal">{</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structms__mgau__model__t" kindref="compound">ms_mgau_model_t</ref><sp/>*msg<sp/>=<sp/>(<ref refid="structms__mgau__model__t" kindref="compound">ms_mgau_model_t</ref><sp/>*)s;</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="ms__gauden_8h_1ab640722f2c2b1e8bc6e883d9b5b72494" kindref="member">gauden_mllr_transform</ref>(msg-&gt;<ref refid="structms__mgau__model__t_1a91027cdb757280ac557668068e6f1b07" kindref="member">g</ref>,<sp/>mllr,<sp/>msg-&gt;config);</highlight></codeline>
<codeline lineno="187"><highlight class="normal">}</highlight></codeline>
<codeline lineno="188"><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal">int32</highlight></codeline>
<codeline lineno="190"><highlight class="normal">ms_cont_mgau_frame_eval(<ref refid="structps__mgau__s" kindref="compound">ps_mgau_t</ref><sp/>*<sp/>mg,</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int16<sp/>*senscr,</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint8<sp/>*senone_active,</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int32<sp/>n_senone_active,</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mfcc_t<sp/>**<sp/>feat,</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int32<sp/>frame,</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int32<sp/>compallsen)</highlight></codeline>
<codeline lineno="197"><highlight class="normal">{</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structms__mgau__model__t" kindref="compound">ms_mgau_model_t</ref><sp/>*msg<sp/>=<sp/>(<ref refid="structms__mgau__model__t" kindref="compound">ms_mgau_model_t</ref><sp/>*)mg;</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/>int32<sp/>gid;</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/>int32<sp/>topn;</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/>int32<sp/>best;</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structgauden__t" kindref="compound">gauden_t</ref><sp/>*g;</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structsenone__t" kindref="compound">senone_t</ref><sp/>*sen;</highlight></codeline>
<codeline lineno="204"><highlight class="normal"></highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/>topn<sp/>=<sp/>ms_mgau_topn(msg);</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/>g<sp/>=<sp/>ms_mgau_gauden(msg);</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/>sen<sp/>=<sp/>ms_mgau_senone(msg);</highlight></codeline>
<codeline lineno="208"><highlight class="normal"></highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(compallsen)<sp/>{</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int32<sp/>s;</highlight></codeline>
<codeline lineno="211"><highlight class="normal"></highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(gid<sp/>=<sp/>0;<sp/>gid<sp/>&lt;<sp/>g-&gt;<ref refid="structgauden__t_1af15df11bd2f3ab0290e0a33ca15c836c" kindref="member">n_mgau</ref>;<sp/>gid++)</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="ms__gauden_8h_1a68cd25af0a2faf05eacd17afd5407ea4" kindref="member">gauden_dist</ref>(g,<sp/>gid,<sp/>topn,<sp/>feat,<sp/>msg-&gt;dist[gid]);</highlight></codeline>
<codeline lineno="214"><highlight class="normal"></highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>best<sp/>=<sp/>(int32)<sp/>0x7fffffff;</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(s<sp/>=<sp/>0;<sp/>s<sp/>&lt;<sp/>sen-&gt;<ref refid="structsenone__t_1a769aa6d2fc16b33c0b9a1cbf31592422" kindref="member">n_sen</ref>;<sp/>s++)<sp/>{</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>senscr[s]<sp/>=<sp/><ref refid="ms__senone_8h_1a0ef3f343c1f7a9504a1ceda2d7383000" kindref="member">senone_eval</ref>(sen,<sp/>s,<sp/>msg-&gt;dist[sen-&gt;<ref refid="structsenone__t_1a5f0eee5a11e7c10b20e0cce10305edfc" kindref="member">mgau</ref>[s]],<sp/>topn);</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(best<sp/>&gt;<sp/>senscr[s])<sp/>{</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>best<sp/>=<sp/>senscr[s];</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="222"><highlight class="normal"></highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Normalize<sp/>senone<sp/>scores<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(s<sp/>=<sp/>0;<sp/>s<sp/>&lt;<sp/>sen-&gt;<ref refid="structsenone__t_1a769aa6d2fc16b33c0b9a1cbf31592422" kindref="member">n_sen</ref>;<sp/>s++)<sp/>{</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int32<sp/>bs<sp/>=<sp/>senscr[s]<sp/>-<sp/>best;</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(bs<sp/>&gt;<sp/>32767)</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bs<sp/>=<sp/>32767;</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(bs<sp/>&lt;<sp/>-32768)</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bs<sp/>=<sp/>-32768;</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>senscr[s]<sp/>=<sp/>bs;</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int32<sp/>i,<sp/>n;</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Flag<sp/>all<sp/>active<sp/>mixture-gaussian<sp/>codebooks<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(gid<sp/>=<sp/>0;<sp/>gid<sp/>&lt;<sp/>g-&gt;<ref refid="structgauden__t_1af15df11bd2f3ab0290e0a33ca15c836c" kindref="member">n_mgau</ref>;<sp/>gid++)</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg-&gt;mgau_active[gid]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="238"><highlight class="normal"></highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>n<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>for<sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>n_senone_active;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>senone_active<sp/>consists<sp/>of<sp/>deltas.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int32<sp/>s<sp/>=<sp/>senone_active[i]<sp/>+<sp/>n;</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg-&gt;mgau_active[sen-&gt;<ref refid="structsenone__t_1a5f0eee5a11e7c10b20e0cce10305edfc" kindref="member">mgau</ref>[s]]<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>n<sp/>=<sp/>s;</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="246"><highlight class="normal"></highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Compute<sp/>topn<sp/>gaussian<sp/>density<sp/>values<sp/>(for<sp/>active<sp/>codebooks)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(gid<sp/>=<sp/>0;<sp/>gid<sp/>&lt;<sp/>g-&gt;<ref refid="structgauden__t_1af15df11bd2f3ab0290e0a33ca15c836c" kindref="member">n_mgau</ref>;<sp/>gid++)<sp/>{</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(msg-&gt;mgau_active[gid])</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="ms__gauden_8h_1a68cd25af0a2faf05eacd17afd5407ea4" kindref="member">gauden_dist</ref>(g,<sp/>gid,<sp/>topn,<sp/>feat,<sp/>msg-&gt;dist[gid]);</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="252"><highlight class="normal"></highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>best<sp/>=<sp/>(int32)<sp/>0x7fffffff;</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>n<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>n_senone_active;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int32<sp/>s<sp/>=<sp/>senone_active[i]<sp/>+<sp/>n;</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>senscr[s]<sp/>=<sp/><ref refid="ms__senone_8h_1a0ef3f343c1f7a9504a1ceda2d7383000" kindref="member">senone_eval</ref>(sen,<sp/>s,<sp/>msg-&gt;dist[sen-&gt;<ref refid="structsenone__t_1a5f0eee5a11e7c10b20e0cce10305edfc" kindref="member">mgau</ref>[s]],<sp/>topn);</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(best<sp/>&gt;<sp/>senscr[s])<sp/>{</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>best<sp/>=<sp/>senscr[s];</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>n<sp/>=<sp/>s;</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="263"><highlight class="normal"></highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Normalize<sp/>senone<sp/>scores<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>n<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>n_senone_active;<sp/>i++)<sp/>{</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int32<sp/>s<sp/>=<sp/>senone_active[i]<sp/>+<sp/>n;</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int32<sp/>bs<sp/>=<sp/>senscr[s]<sp/>-<sp/>best;</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(bs<sp/>&gt;<sp/>32767)</highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bs<sp/>=<sp/>32767;</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(bs<sp/>&lt;<sp/>-32768)</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bs<sp/>=<sp/>-32768;</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>senscr[s]<sp/>=<sp/>bs;</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>n<sp/>=<sp/>s;</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="277"><highlight class="normal"></highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="279"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="/home/gpuser/cmusphinx-code/pocketsphinx/src/libpocketsphinx/ms_mgau.c"/>
  </compounddef>
</doxygen>
